<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>HTTP Protocol | Celeste&#39;s blog</title>
    <meta name="generator" content="VuePress 1.7.1">
    
    <meta name="description" content="Technique && Life">
    
    <link rel="preload" href="/notebook/assets/css/0.styles.2b364e15.css" as="style"><link rel="preload" href="/notebook/assets/js/app.9fa7afbe.js" as="script"><link rel="preload" href="/notebook/assets/js/2.33f5d3e6.js" as="script"><link rel="preload" href="/notebook/assets/js/3.4a22455e.js" as="script"><link rel="prefetch" href="/notebook/assets/js/10.3aad0b9a.js"><link rel="prefetch" href="/notebook/assets/js/11.3e09ee57.js"><link rel="prefetch" href="/notebook/assets/js/12.3b13ab5c.js"><link rel="prefetch" href="/notebook/assets/js/13.ba529909.js"><link rel="prefetch" href="/notebook/assets/js/14.33add7b9.js"><link rel="prefetch" href="/notebook/assets/js/15.6fa763e9.js"><link rel="prefetch" href="/notebook/assets/js/16.a9d424d5.js"><link rel="prefetch" href="/notebook/assets/js/17.551a5ee4.js"><link rel="prefetch" href="/notebook/assets/js/18.e0253e6f.js"><link rel="prefetch" href="/notebook/assets/js/19.4ab51a51.js"><link rel="prefetch" href="/notebook/assets/js/20.b5f2958e.js"><link rel="prefetch" href="/notebook/assets/js/21.e429ea39.js"><link rel="prefetch" href="/notebook/assets/js/22.500437ae.js"><link rel="prefetch" href="/notebook/assets/js/23.b91f4442.js"><link rel="prefetch" href="/notebook/assets/js/24.91148c5d.js"><link rel="prefetch" href="/notebook/assets/js/25.e19e3297.js"><link rel="prefetch" href="/notebook/assets/js/26.a56e44dc.js"><link rel="prefetch" href="/notebook/assets/js/27.9439f3d9.js"><link rel="prefetch" href="/notebook/assets/js/28.027349c9.js"><link rel="prefetch" href="/notebook/assets/js/29.4d0db5b7.js"><link rel="prefetch" href="/notebook/assets/js/30.b79ad02f.js"><link rel="prefetch" href="/notebook/assets/js/31.cea2ae31.js"><link rel="prefetch" href="/notebook/assets/js/4.8aa5ba20.js"><link rel="prefetch" href="/notebook/assets/js/5.2f919cce.js"><link rel="prefetch" href="/notebook/assets/js/6.22ff99d8.js"><link rel="prefetch" href="/notebook/assets/js/7.1f8a88df.js"><link rel="prefetch" href="/notebook/assets/js/8.b1ed59cf.js"><link rel="prefetch" href="/notebook/assets/js/9.7efb3190.js">
    <link rel="stylesheet" href="/notebook/assets/css/0.styles.2b364e15.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/notebook/" class="home-link router-link-active"><!----> <span class="site-name">Celeste's blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="计算机科学与技术" class="dropdown-title"><span class="title">计算机科学与技术</span> <span class="arrow down"></span></button> <button type="button" aria-label="计算机科学与技术" class="mobile-dropdown-title"><span class="title">计算机科学与技术</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notebook/cs/computer-organization/" class="nav-link">
  计算机组成原理
</a></li><li class="dropdown-item"><!----> <a href="/notebook/cs/data-structure/" class="nav-link">
  数据结构
</a></li><li class="dropdown-item"><!----> <a href="/notebook/cs/network/" class="nav-link router-link-active">
  计算机网络
</a></li><li class="dropdown-item"><!----> <a href="/notebook/cs/others/" class="nav-link">
  杂谈
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="杂谈" class="dropdown-title"><span class="title">杂谈</span> <span class="arrow down"></span></button> <button type="button" aria-label="杂谈" class="mobile-dropdown-title"><span class="title">杂谈</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notebook/others/coffee/" class="nav-link">
  咖啡
</a></li></ul></div></div> <a href="https://github.com/nsznsznjsz/notebook" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="计算机科学与技术" class="dropdown-title"><span class="title">计算机科学与技术</span> <span class="arrow down"></span></button> <button type="button" aria-label="计算机科学与技术" class="mobile-dropdown-title"><span class="title">计算机科学与技术</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notebook/cs/computer-organization/" class="nav-link">
  计算机组成原理
</a></li><li class="dropdown-item"><!----> <a href="/notebook/cs/data-structure/" class="nav-link">
  数据结构
</a></li><li class="dropdown-item"><!----> <a href="/notebook/cs/network/" class="nav-link router-link-active">
  计算机网络
</a></li><li class="dropdown-item"><!----> <a href="/notebook/cs/others/" class="nav-link">
  杂谈
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="杂谈" class="dropdown-title"><span class="title">杂谈</span> <span class="arrow down"></span></button> <button type="button" aria-label="杂谈" class="mobile-dropdown-title"><span class="title">杂谈</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notebook/others/coffee/" class="nav-link">
  咖啡
</a></li></ul></div></div> <a href="https://github.com/nsznsznjsz/notebook" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><a href="/notebook/cs/network/" class="sidebar-heading clickable router-link-active open"><span>计算机网络</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/notebook/cs/network/tcp.html" class="sidebar-link">TCP Protocol</a></li><li><a href="/notebook/cs/network/http.html" aria-current="page" class="active sidebar-link">HTTP Protocol</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notebook/cs/network/http.html#基本结构" class="sidebar-link">基本结构</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notebook/cs/network/http.html#request" class="sidebar-link">Request</a></li><li class="sidebar-sub-header"><a href="/notebook/cs/network/http.html#response" class="sidebar-link">Response</a></li></ul></li><li class="sidebar-sub-header"><a href="/notebook/cs/network/http.html#http1-1" class="sidebar-link">HTTP1.1</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notebook/cs/network/http.html#与-http1-0-的区别" class="sidebar-link">与 HTTP1.0 的区别</a></li></ul></li><li class="sidebar-sub-header"><a href="/notebook/cs/network/http.html#https" class="sidebar-link">HTTPS</a></li><li class="sidebar-sub-header"><a href="/notebook/cs/network/http.html#网速优化" class="sidebar-link">网速优化</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notebook/cs/network/http.html#浏览器阻塞-hol-blocking" class="sidebar-link">浏览器阻塞 (HOL blocking)</a></li><li class="sidebar-sub-header"><a href="/notebook/cs/network/http.html#dns查询-dns-lookup" class="sidebar-link">DNS查询 (DNS Lookup)</a></li><li class="sidebar-sub-header"><a href="/notebook/cs/network/http.html#建立连接-initial-connection" class="sidebar-link">建立连接 (Initial connection)</a></li></ul></li><li class="sidebar-sub-header"><a href="/notebook/cs/network/http.html#http2-0" class="sidebar-link">HTTP2.0</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notebook/cs/network/http.html#spdy" class="sidebar-link">SPDY</a></li><li class="sidebar-sub-header"><a href="/notebook/cs/network/http.html#http2-0-基于-spdy" class="sidebar-link">HTTP2.0 基于 SPDY</a></li><li class="sidebar-sub-header"><a href="/notebook/cs/network/http.html#features" class="sidebar-link">Features</a></li><li class="sidebar-sub-header"><a href="/notebook/cs/network/http.html#multiplexing-与-pipelining-区别" class="sidebar-link">MultiPlexing 与 Pipelining 区别?</a></li></ul></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="http"><a href="#http" class="header-anchor">#</a> HTTP</h1> <p></p><div class="table-of-contents"><ul><li><a href="#基本结构">基本结构</a><ul><li><a href="#request">Request</a></li><li><a href="#response">Response</a></li></ul></li><li><a href="#http1-1">HTTP1.1</a><ul><li><a href="#与-http1-0-的区别">与 HTTP1.0 的区别</a></li></ul></li><li><a href="#https">HTTPS</a></li><li><a href="#网速优化">网速优化</a><ul><li><a href="#浏览器阻塞-hol-blocking">浏览器阻塞 (HOL blocking)</a></li><li><a href="#dns查询-dns-lookup">DNS查询 (DNS Lookup)</a></li><li><a href="#建立连接-initial-connection">建立连接 (Initial connection)</a></li></ul></li><li><a href="#http2-0">HTTP2.0</a><ul><li><a href="#spdy">SPDY</a></li><li><a href="#http2-0-基于-spdy">HTTP2.0 基于 SPDY</a></li><li><a href="#features">Features</a></li><li><a href="#multiplexing-与-pipelining-区别">MultiPlexing 与 Pipelining 区别?</a></li></ul></li></ul></div><p></p> <h2 id="基本结构"><a href="#基本结构" class="header-anchor">#</a> 基本结构</h2> <h3 id="request"><a href="#request" class="header-anchor">#</a> Request</h3> <p><img src="/notebook/assets/img/http-request.5832cc77.png" alt="http request"></p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <ol><li>换行为 \r\n (CRLF)</li> <li>header 与 body 间存在 blank line</li></ol></div> <div class="language- extra-class"><pre class="language-text"><code>GET /search?hl=zh-CN&amp;source=hp&amp;q=domety&amp;aq=f&amp;oq= HTTP/1.1  
Accept: image/gif, image/x-xbitmap, image/jpeg, image/pjpeg, application/vnd.ms-excel, application/vnd.ms-powerpoint, 
application/msword, application/x-silverlight, application/x-shockwave-flash, */*  
Referer: &lt;a href=&quot;http://www.google.cn/&quot;&gt;http://www.google.cn/&lt;/a&gt;  
Accept-Language: zh-cn  
Accept-Encoding: gzip, deflate  
User-Agent: Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; .NET CLR 2.0.50727; TheWorld)  
Host: &lt;a href=&quot;http://www.google.cn&quot;&gt;www.google.cn&lt;/a&gt;  
Connection: Keep-Alive  
Cookie: PREF=ID=80a06da87be9ae3c:U=f7167333e2c3b714:NW=1:TM=1261551909:LM=1261551917:S=ybYcq2wpfefs4V9g; NID=31=ojj8d-IygaEtSxLgaJmqSjVhCspkviJrB6omjamNrSm8lZhKy_yMfO2M4QMRKcH1g0iQv9u-2hfBW7bUFwVh7pGaRUb0RnHcJU37y-FxlRugatx63JLv7CWMD6UB_O_r  
</code></pre></div><h4 id="method"><a href="#method" class="header-anchor">#</a> method</h4> <p>语义规定，无强约束</p> <div class="language- extra-class"><pre class="language-text"><code>GET // 页面访问, 一般不包含 body, 数据以 url 形式出现在 &lt;request-line&gt;
POST // 表单提交
PUT
DELETE
HEAD
OPTIONS // CORS
CONNECT // 现在多用于 HTTPS/WebSocket
TRACE // 据说用于调试
</code></pre></div><h4 id="head"><a href="#head" class="header-anchor">#</a> head</h4> <div class="language- extra-class"><pre class="language-text"><code>User-Agent // 产生请求的浏览器类型
Referer // 当前请求页面的来源页面的地址
Connection: Keep-Alive
Cookie

// 客户端可识别的内容类型列表。
Accept
Accept-Language
Accept-Encoding

// 请求的主机名，允许多个域名同处一个IP地址，即虚拟主机。
Host

// body 格式
Content-Type
Content-Length
</code></pre></div><h3 id="response"><a href="#response" class="header-anchor">#</a> Response</h3> <div class="language- extra-class"><pre class="language-text"><code>HTTP/1.1 200 OK
Date: Sat, 31 Dec 2005 23:59:59 GMT
Content-Type: text/html;charset=ISO-8859-1
Content-Length: 122

&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;Wrox Homepage&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;!-- body goes here --&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre></div><h4 id="status-code"><a href="#status-code" class="header-anchor">#</a> status code</h4> <ul><li><p>1xx: 临时回应，希望客户端继续处理</p></li> <li><p>2xx: 200 OK</p></li> <li><p>3xx: 请求目标有变化，希望客户端进一步处理</p> <ul><li>301 永久性跳转</li> <li>302 临时性跳转</li> <li><strong>304</strong> 客户端本地已经有缓存的版本，并且在 Request 中告诉了服务端，当服务端通过时间或 tag 发现没有更新的时候，就会返回一个不含 body 的 304 状态</li></ul></li> <li><p>4xx: 客户端请求错误</p> <ul><li>400 Bad Request</li> <li>403 无权限</li> <li>404 页面不存在</li> <li>418 It’s a teapot.</li></ul></li> <li><p>5xx: 服务器处理错误</p> <ul><li>500 服务器错误</li> <li>503 服务器暂时性错误</li></ul></li></ul> <h4 id="status-text"><a href="#status-text" class="header-anchor">#</a> status text</h4> <p>相同状态码不一定具有相同 status text</p> <h2 id="http1-1"><a href="#http1-1" class="header-anchor">#</a> HTTP1.1</h2> <p>HTTP1.1 为目前使用最广泛的 HTTP 协议</p> <h3 id="与-http1-0-的区别"><a href="#与-http1-0-的区别" class="header-anchor">#</a> 与 HTTP1.0 的区别</h3> <ol><li><strong>缓存处理</strong>: <code>E-tag</code>, <code>If-Unmodified-Since</code>, <code>If-Match</code>, <code>If-None-Match</code></li> <li><strong>带宽优化及网络连接的使用</strong>: 允许请求资源某个部分, 响应 206 (Partial Content), 引入<code>range</code>头域</li> <li><strong>错误通知管理</strong>: 新增 24 个错误状态响应码</li> <li><strong>Host头处理</strong>: 支持同一IP地址上的多个虚拟主机, 如果请求中没有<code>Host</code>头域, 报告 400 Bad Request</li> <li><strong>长连接</strong>: 支持长连接 (Persistent Connection) 和请求的流水线 (Pipelining) 处理, 默认开启<code>Connection: keep-alive</code></li></ol> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>HTTP1.1 Pipelining, 若干个请求排队串行化单线程请求, 后面请求需要等待前面请求返回, 可能存在线头阻塞</p></div> <p><img src="/notebook/assets/img/http-parallel-connect.606aba29.jpg" alt="Roundup on Parallel Connections"></p> <p>来源: <a href="http://www.stevesouders.com/blog/2008/03/20/roundup-on-parallel-connections/" target="_blank" rel="noopener noreferrer">Roundup on Parallel Connections<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="https"><a href="#https" class="header-anchor">#</a> HTTPS</h2> <ol><li>HTTPS 协议协议需要到 CA 申请证书</li> <li>HTTP 直接运行在 TCP 上, HTTPS 运行在 SSL/TLS 上, SSL/TLS 运行在 TCP 上, 所有传输内容均经过加密</li> <li>默认端口不同, HTTP 默认端口为 80, HTTPS 默认端口为 443</li> <li>HTTPS 可以有效防止运营商劫持</li></ol> <h2 id="网速优化"><a href="#网速优化" class="header-anchor">#</a> 网速优化</h2> <p>影响HTTP网络请求的主要因素有<strong>带宽</strong>和<strong>延迟</strong>, 伴随着网络基础设施建设, 带宽已经得到了极大的提升, 影响网速的主要因素成为了延迟, 延迟主要有三种:</p> <h3 id="浏览器阻塞-hol-blocking"><a href="#浏览器阻塞-hol-blocking" class="header-anchor">#</a> 浏览器阻塞 (HOL blocking)</h3> <p>浏览器会因为一些原因阻塞请求.</p> <p>浏览器对于同一域名, 同时最多四个请求 (根据浏览器内核版本不同有所差异)</p> <h3 id="dns查询-dns-lookup"><a href="#dns查询-dns-lookup" class="header-anchor">#</a> DNS查询 (DNS Lookup)</h3> <p>利用 DNS 缓存优化</p> <h3 id="建立连接-initial-connection"><a href="#建立连接-initial-connection" class="header-anchor">#</a> 建立连接 (Initial connection)</h3> <p>HTTP 基于 TCP, 浏览器最快也需要在第三次握手才能捎带 HTTP 报文, 会导致每次请求都经历<strong>三次握手</strong>和<strong>慢启动</strong>, 其中三次握手在高延迟场景下较明显, 慢启动对于文件类大请求影响较大</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>最初的 TCP 在连接建立成功后会向网络中发送大量的数据包, 这样很容易导致网络中路由器缓存空间耗尽, 从而发生拥塞. 因此新建立的连接不能够一开始就大量发送数据包, 而只能根据网络情况逐步增加每次发送的数据量, 以避免上述现象的发生.</p> <p>慢启动会让原本就具有突发性和短时性的 HTTP 连接变得十分低效</p></div> <h2 id="http2-0"><a href="#http2-0" class="header-anchor">#</a> HTTP2.0</h2> <p><img src="data:image/jpeg;base64,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" alt="HTTP History"></p> <h3 id="spdy"><a href="#spdy" class="header-anchor">#</a> SPDY</h3> <p>谷歌于 2012 年提出了 SPDY 方案, 优化 HTTP1.X 请求延时, 解决了 HTTP1.X 的安全性, SPDY 位于 HTTP 下, TCP 和 SSL 上, 兼容 HTTP, 同时可以使用已有 SSL 功能</p> <ol><li><strong>降低延迟</strong>, 通过多路复用 (multiplexin) 共享 TCP 连接, 解决 HOL blockin</li> <li><strong>请求优先级</strong>, 防止 multiplexing 导致的关键请求被阻塞问题</li> <li><strong>header 压缩</strong></li> <li><strong>基于HTTPS的加密协议传输</strong></li> <li><strong>服务器端推送 (Server Push)</strong></li></ol> <h3 id="http2-0-基于-spdy"><a href="#http2-0-基于-spdy" class="header-anchor">#</a> HTTP2.0 基于 SPDY</h3> <p>区别:</p> <ol><li>HTTP2.0 支持明文传输, 而 SPDY 强制 HTTPS</li> <li>HTTP2.0 header 压缩算法采用 HPACK, 而 SPDY 采用 deflate</li></ol> <h3 id="features"><a href="#features" class="header-anchor">#</a> Features</h3> <ol><li><strong>二进制格式 (Binary Format)</strong></li> <li><strong>多路复用 (MultiPlexing)</strong></li> <li><strong>header 压缩</strong> 通讯双方各自 cache 一份 header fields 表</li> <li><strong>服务器端推送 (Server Push)</strong></li></ol> <div class="custom-block tip"><p class="custom-block-title">Binary Format</p> <p>在不改动 HTTP/1.x 的语义、方法、状态码、URI 以及首部字段….. 的情况下, HTTP/2 是如何做到「突破 HTTP1.1 的性能限制，改进传输性能，实现低延迟和高吞吐量」的 ? 关键之一就是在 应用层(HTTP/2)和传输层(TCP or UDP)之间增加一个二进制分帧层。</p> <p><img src="/notebook/assets/img/http2.0-binary-framing.ce682d79.jpg" alt="HTTP/2 Binary Framing"></p> <p>在不改动 HTTP/1.x 的语义、方法、状态码、URI 以及首部字段….. 的情况下, HTTP/2 是如何做到「突破 HTTP1.1 的性能限制，改进传输性能，实现低延迟和高吞吐量」的 ?</p></div> <h3 id="multiplexing-与-pipelining-区别"><a href="#multiplexing-与-pipelining-区别" class="header-anchor">#</a> MultiPlexing 与 Pipelining 区别?</h3> <p><img src="/notebook/assets/img/MultiPlexing-and-Pipelining.ca82a12c.jpg" alt="Different between MultiPlexing and Pipelining"></p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/nsznsznjsz/notebook/edit/master/docs/cs/network/http.md" target="_blank" rel="noopener noreferrer">编辑此页</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2021/1/23 下午2:35:28</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/notebook/cs/network/tcp.html" class="prev">
        TCP Protocol
      </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/notebook/assets/js/app.9fa7afbe.js" defer></script><script src="/notebook/assets/js/2.33f5d3e6.js" defer></script><script src="/notebook/assets/js/3.4a22455e.js" defer></script>
  </body>
</html>
