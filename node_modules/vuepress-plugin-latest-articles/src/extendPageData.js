const {
  getGitCreatedTimeStamp,
  getGitLastUpdatedTimeStamp,
} = require("./timeStamp")

module.exports = (orderByFirstCommit = false) => {
  const getGitTimeStamp = orderByFirstCommit
    ? getGitCreatedTimeStamp
    : getGitLastUpdatedTimeStamp

  return ($page) => {
    const timeStamp =
      $page.frontmatter?.date ?? getGitTimeStamp($page._filePath)
    if (timeStamp) $page.lastUpdatedRaw = timeStamp
  }
}
